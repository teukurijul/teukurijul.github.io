<!-- Tierâ€‘S Stable Cyberpunk Version -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cyberpunk Portfolio â€“ Stable Sâ€‘Tier</title>
  <style>
    body {
      margin: 0;
      font-family: 'Orbitron', sans-serif;
      background: #050505;
      color: #0ff;
      overflow-x: hidden;
    }

    /* Safe Fade-in Page */
    .page-loaded {
      opacity: 1;
      transition: opacity 0.6s ease-out;
    }
    body {
      opacity: 0;
    }

    /* Hologram Avatar */
    .avatar-box {
      display: flex;
      justify-content: center;
      margin-top: 60px;
    }
    .avatar-box img {
      width: 180px;
      height: 180px;
      border-radius: 50%;
      border: 3px solid #0ff;
      box-shadow: 0 0 20px #0ff;
      filter: drop-shadow(0 0 15px cyan);
      background: #000;
      object-fit: cover;
    }

    /* Glowing Buttons */
    .cyber-btn {
      display: inline-block;
      padding: 14px 26px;
      margin: 14px;
      border: 2px solid #0ff;
      color: #0ff;
      background: transparent;
      text-transform: uppercase;
      font-weight: bold;
      letter-spacing: 1px;
      transition: 0.25s;
      box-shadow: 0 0 8px #0ff;
    }
    .cyber-btn:hover {
      background: #0ff;
      color: #000;
      box-shadow: 0 0 20px #0ff;
      transform: translateY(-3px);
    }

    /* Rain Effect (Disabled at start) */
    #rain-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      opacity: 0;
      transition: opacity 1.2s ease-out;
    }
  </style>
<style>
/* Tier-S+ 3D Glitch Text */
.glitch-3d {position:relative;display:inline-block;font-weight:800;text-shadow:0 0 8px #0ff,0 0 12px #0ff;}
.glitch-3d::before,.glitch-3d::after{content:attr(data-text);position:absolute;top:0;left:0;} 
.glitch-3d::before{color:#f0f;transform:translate(2px,0);} 
.glitch-3d::after{color:#0ff;transform:translate(-2px,0);} 

/* Hologram Frame */
.holo-frame {border:1px solid rgba(0,255,255,0.4);box-shadow:0 0 12px #0ff inset,0 0 18px #0ff;border-radius:12px;padding:16px;backdrop-filter:blur(6px);} 

/* Language Switcher */
#lang-switch {position:fixed;top:20px;right:20px;z-index:999;padding:6px 10px;background:rgba(0,255,255,0.1);border:1px solid #0ff;color:#0ff;border-radius:8px;}
</style>
</head>
<body>

  <!-- Avatar Section -->
  <div class="avatar-box">
    <img id="avatar-img" src="avatar.jpg" alt="Avatar" />
  </div>

  <h1 style="text-align:center;margin-top:20px;">CYBERPUNK PORTFOLIO</h1>

  <div style="text-align:center;margin-top:20px;">
    <a class="cyber-btn" href="#services">Services</a>
    <a class="cyber-btn" href="#contact">Contact</a>
  </div>

  <!-- Rain Canvas -->
  <canvas id="rain-canvas"></canvas>

  <script>
    /*************************************************
     * Tierâ€‘S Stability Patch (No More Black Screen)
     *************************************************/

    // ENSURE PAGE FADES IN SAFELY
    window.addEventListener('load', () => {
      document.body.classList.add('page-loaded');

      // Delay heavy effects for stability
      setTimeout(() => startRainEffect(), 1400);
    });

    /*************************************************
     * FIX AVATAR IMAGE CORRUPTION ON MOBILE
     *************************************************/
    const avatar = document.getElementById('avatar-img');
    avatar.onload = () => {
      avatar.style.opacity = 1;
    };
    avatar.onerror = () => {
      console.warn('Avatar failed to load, replacing fallback.');
      avatar.src = 'https://via.placeholder.com/300x300?text=Avatar';
    };


    /*************************************************
     * Optimized Cyber Rain Effect (Tierâ€‘S Smooth)
     *************************************************/
    function startRainEffect() {
      const canvas = document.getElementById("rain-canvas");
      const ctx = canvas.getContext("2d");

      canvas.width = innerWidth;
      canvas.height = innerHeight;

      const drops = [];
      const total = Math.min(120, innerWidth / 10);

      for (let i = 0; i < total; i++) {
        drops.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          len: 10 + Math.random() * 20,
          spd: 4 + Math.random() * 4
        });
      }

      canvas.style.opacity = 1;

      function rain() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.strokeStyle = "rgba(0,255,255,0.6)";
        ctx.lineWidth = 2;

        drops.forEach(d => {
          ctx.beginPath();
          ctx.moveTo(d.x, d.y);
          ctx.lineTo(d.x, d.y + d.len);
          ctx.stroke();

          d.y += d.spd;
          if (d.y > canvas.height) {
            d.y = -20;
            d.x = Math.random() * canvas.width;
          }
        });

        requestAnimationFrame(rain);
      }
      rain();
    }
  </script>
<select id="lang-switch">
<option value="id">ðŸ‡®ðŸ‡© Indonesia</option>
<option value="en">ðŸ‡¬ðŸ‡§ English</option>
</select>

<audio id="sfx-hover"><source src="hover.mp3" type="audio/mpeg"></audio>
<audio id="sfx-click"><source src="click.mp3" type="audio/mpeg"></audio>

<script>
// SFX
const hover = document.getElementById('sfx-hover');
const clickS = document.getElementById('sfx-click');
document.addEventListener('mouseover',e=>{if(e.target.closest('a, button')) hover.play().catch(()=>{});});
document.addEventListener('click',e=>{if(e.target.closest('a, button')) clickS.play().catch(()=>{});});

// Language Switcher
const texts = {en:{welcome:"Welcome to the Future."}, id:{welcome:"Selamat Datang di Masa Depan."}};
const switcher=document.getElementById('lang-switch');
switcher.onchange=()=>{document.querySelectorAll('[data-i18n]').forEach(el=>{el.innerText=texts[switcher.value][el.dataset.i18n];});};
</script>
</body>
</html>
